generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  user
  superuser
  admin
}

enum Theme {
  dark
  light
}

model user {
  id              String  @id
  display_name    String
  username        String  @unique()
  first_name      String?
  last_name       String?
  email           String  @unique()
  isEmailVerified Boolean @default(false)
  password        String

  image String  @default("https://www.famlam.ca/logo/logo512-blue-s.png")
  role  Role    @default(user)
  bio   String? @db.Text
  theme Theme   @default(dark)

  session           session[]
  emailVerification emailVerification[]
  resetPassword     resetPassword[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model session {
  id String @id

  userId String
  user   user   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  expiresAt DateTime @db.Timestamp(0)
}

model emailVerification {
  id   String @id
  code String

  userId String
  user   user   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  sentAt    DateTime @db.Timestamp(0)
}

model resetPassword {
  id   String @id
  code String

  userEmail String
  user      user   @relation(fields: [userEmail], references: [email], onDelete: Cascade, onUpdate: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  sentAt    DateTime @db.Timestamp(0)
}
